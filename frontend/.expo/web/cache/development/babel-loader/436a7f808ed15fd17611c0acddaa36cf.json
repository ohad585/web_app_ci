{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport apiClient from \"./ApiClient\";\nvar getAllUsers = function () {\n  var _ref = _asyncToGenerator(function* () {\n    var res = yield apiClient.get(\"/user/\");\n    var users = Array();\n    if (res.data) {\n      res.data.forEach(function (element) {\n        var user = {\n          email: element.userName,\n          password: element.password,\n          imageUri: element.imgUri\n        };\n        users.push(user);\n      });\n    } else {\n      console.log(\"getAllUser fail\");\n    }\n    return users;\n  });\n  return function getAllUsers() {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar getuserById = function () {\n  var _ref2 = _asyncToGenerator(function* (id) {\n    console.log(\"UserAPI \" + id);\n    var res = yield apiClient.get(\"/user/\" + id);\n    var user = {\n      email: \"\",\n      password: \"\",\n      imageUri: \"\"\n    };\n    if (res.data) {\n      user.email = res.data.email, user.password = res.data.password, user.imageUri = res.data.imageUri;\n    } else {\n      console.log(\"getUserById failed\");\n    }\n    return user;\n  });\n  return function getuserById(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar addUser = function () {\n  var _ref3 = _asyncToGenerator(function* (user) {\n    console.log(\"AddUser \" + user.email + \" \" + user.imageUri);\n    var res = yield apiClient.post(\"/auth/register\", {\n      email: user.email,\n      password: user.password,\n      imageUri: user.imageUri\n    });\n    if (res.ok) {\n      var usrC = {\n        access_token: res.data.access_token,\n        refresh_token: res.data.refresh_token,\n        _id: res.data._id\n      };\n      console.log(\"addUser success \" + usrC._id);\n      return usrC;\n    } else {\n      console.log(\"addUser fail\");\n      return null;\n    }\n  });\n  return function addUser(_x2) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar addGoogleUser = function () {\n  var _ref4 = _asyncToGenerator(function* (usr) {\n    console.log(\"Add google user attempt \" + usr.email);\n    var res = yield apiClient.post(\"/auth/register/google\", {\n      email: usr.email,\n      password: usr.password,\n      imageUri: usr.imageUri\n    });\n    if (res.ok) {\n      console.log(res.data);\n      var usrC = {\n        access_token: res.data.access_token,\n        refresh_token: res.data.refresh_token,\n        _id: res.data._id\n      };\n      console.log(\"addGoogleUser success \" + usrC._id);\n      return usrC;\n    } else {\n      console.log(\"addGoogleUser fail\");\n    }\n  });\n  return function addGoogleUser(_x3) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nvar updateUser = function () {\n  var _ref5 = _asyncToGenerator(function* (user, oldEmail, accessToken, id) {\n    console.log(\"UpdateUser \" + user.email + \" \" + user.imageUri);\n    apiClient.addAsyncRequestTransform(function (request) {\n      return _asyncToGenerator(function* () {\n        request.headers['authorization'] = \"barer \" + accessToken;\n      });\n    });\n    var res = yield apiClient.post(\"/user/edit\", {\n      oldEmail: oldEmail,\n      newEmail: user.email,\n      password: user.password,\n      imageUri: user.imageUri,\n      id: id\n    });\n    if (res.ok) {\n      console.log(\"update User success\");\n    } else {\n      console.log(\"update User fail\");\n    }\n  });\n  return function updateUser(_x4, _x5, _x6, _x7) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nvar loginUser = function () {\n  var _ref7 = _asyncToGenerator(function* (user) {\n    var res = yield apiClient.post(\"/auth/login\", {\n      email: user.email,\n      password: user.password\n    });\n    if (res.ok) {\n      console.log(res.data);\n      var usrC = {\n        access_token: res.data.access_token,\n        refresh_token: res.data.refresh_token,\n        _id: res.data._id\n      };\n      console.log(\"Login success \" + usrC._id);\n      return usrC;\n    } else {\n      console.log(\"Login fail\");\n      return null;\n    }\n  });\n  return function loginUser(_x8) {\n    return _ref7.apply(this, arguments);\n  };\n}();\nvar uploadImage = function () {\n  var _ref8 = _asyncToGenerator(function* (imageUri, accessToken) {\n    console.log(\"uploadImage\");\n    var formData = new FormData();\n    formData.append('file', {\n      name: 'name',\n      type: 'image/jpeg',\n      uri: imageUri\n    });\n    var url = '/file/profile_file';\n    var res = yield apiClient.post(url, formData);\n    if (res.ok) {\n      console.log(\"upload Image passed \" + res.data);\n      return res.data.url;\n    } else {\n      console.log(\"save failed \" + res.problem);\n      return null;\n    }\n  });\n  return function uploadImage(_x9, _x10) {\n    return _ref8.apply(this, arguments);\n  };\n}();\nexport default {\n  getAllUsers: getAllUsers,\n  addUser: addUser,\n  loginUser: loginUser,\n  uploadImage: uploadImage,\n  addGoogleUser: addGoogleUser,\n  updateUser: updateUser,\n  getuserById: getuserById\n};","map":{"version":3,"names":["apiClient","getAllUsers","_ref","_asyncToGenerator","res","get","users","Array","data","forEach","element","user","email","userName","password","imageUri","imgUri","push","console","log","apply","arguments","getuserById","_ref2","id","_x","addUser","_ref3","post","ok","usrC","access_token","refresh_token","_id","_x2","addGoogleUser","_ref4","usr","_x3","updateUser","_ref5","oldEmail","accessToken","addAsyncRequestTransform","request","headers","newEmail","_x4","_x5","_x6","_x7","loginUser","_ref7","_x8","uploadImage","_ref8","formData","FormData","append","name","type","uri","url","problem","_x9","_x10"],"sources":["/Users/ohadshalom/Desktop/devops_projects/cicd_project/frontend/model/user_api.tsx"],"sourcesContent":["import apiClient from \"./ApiClient\";\nimport { User, UserCredentials } from \"./user_model\";\n\nconst getAllUsers = async () => {\n  const res = await apiClient.get(\"/user/\");\n  let users = Array<User>()\n  \n  if(res.data){\n    res.data.forEach((element) => {\n      const user:User ={\n        email: element.userName,\n        password: element.password,\n        imageUri:element.imgUri\n      }\n      users.push(user)\n    });\n  }else {\n    console.log(\"getAllUser fail\");\n    \n  }\n  return users\n};\n\nconst getuserById = async (id:String) => {\n  console.log(\"UserAPI \" + id);\n  const res = await apiClient.get(\"/user/\"+id);\n  let user:User = {\n    email:\"\",\n    password:\"\",\n    imageUri:\"\"\n  }\n  if(res.data){\n    user.email = res.data.email,\n    user.password = res.data.password,\n    user.imageUri =res.data.imageUri\n    }else{\n    console.log(\"getUserById failed\");\n      \n    }\n  return user\n};\n\nconst addUser = async (user: User) => {\n  console.log(\"AddUser \"+user.email+\" \"+user.imageUri);\n  \n  const res = await apiClient.post(\"/auth/register\",{\n    email:user.email,\n    password:user.password,\n    imageUri:user.imageUri\n  });\n  if(res.ok){\n    \n    const usrC:UserCredentials = {\n      access_token:res.data.access_token,\n      refresh_token:res.data.refresh_token,\n      _id:res.data._id\n    }\n    console.log(\"addUser success \"+usrC._id);\n    return usrC\n    \n  }else {\n    console.log(\"addUser fail\");\n    return null\n  }};\n\n  const addGoogleUser = async (usr: User) => {\n    console.log(\"Add google user attempt \"+ usr.email);\n    \n    const res = await apiClient.post(\"/auth/register/google\",{\n      email:usr.email,\n      password:usr.password,\n      imageUri:usr.imageUri\n    });\n    if(res.ok){\n      console.log(res.data)\n      const usrC:UserCredentials = {\n        access_token:res.data.access_token,\n        refresh_token:res.data.refresh_token,\n        _id:res.data._id\n      }\n      console.log(\"addGoogleUser success \"+usrC._id);\n\n      return usrC\n      \n    }else {\n      console.log(\"addGoogleUser fail\");\n    }};\n\nconst updateUser = async (user: User,oldEmail:String,accessToken:String,id:String) => {\n    console.log(\"UpdateUser \"+user.email+\" \"+user.imageUri);\n    apiClient.addAsyncRequestTransform(request =>async () => {\n      request.headers['authorization'] = \"barer \" + accessToken\n    })\n    const res = await apiClient.post(\"/user/edit\",{\n      oldEmail:oldEmail,\n      newEmail:user.email,\n      password:user.password,\n      imageUri:user.imageUri,\n      id:id\n    });   \n    if(res.ok){\n      console.log(\"update User success\");\n      \n    }else {\n      console.log(\"update User fail\");\n  }};\n\n\n\nconst loginUser =async (user:User) => {\n  const res = await apiClient.post(\"/auth/login\",{\n    email:user.email,\n    password:user.password\n  });\n  if(res.ok){\n    console.log(res.data)\n    const usrC:UserCredentials = {\n      access_token:res.data.access_token,\n      refresh_token:res.data.refresh_token,\n      _id:res.data._id\n    }\n    console.log(\"Login success \"+usrC._id);\n    return usrC\n  }else {\n    console.log(\"Login fail\");\n    return null\n  }\n}\n\nconst uploadImage = async (imageUri:String,accessToken:String)=> {\n  console.log(\"uploadImage\")\n  const formData = new FormData()\n  formData.append('file',{name: 'name', type:'image/jpeg', uri: imageUri})\n  let url = '/file/profile_file'\n  const res = await apiClient.post(url,formData)\n  if (res.ok){\n      console.log(\"upload Image passed \" + res.data)\n      return res.data.url\n  }else{\n      console.log(\"save failed \" + res.problem)\n      return null\n  }\n}\n\n\nexport default {\n  getAllUsers,\n  addUser,\n  loginUser,\n  uploadImage,\n  addGoogleUser,\n  updateUser,\n  getuserById\n};\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}