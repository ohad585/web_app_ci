{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport UserModel from \"../model/user_model\";\nimport COLORS from \"../constants/colors\";\nimport ActivityIndicator from \"./component/custom_activity_indicator\";\nimport CustomImagePicker from \"./component/custom_image_picker\";\nimport LocalCache from \"../model/local_cache\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Add_User = function Add_User(_ref) {\n  var navigation = _ref.navigation,\n    route = _ref.route;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoading = _useState2[0],\n    setIsLoading = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    UserName = _useState4[0],\n    setUserName = _useState4[1];\n  var _useState5 = useState(\"\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    Password = _useState6[0],\n    setPassword = _useState6[1];\n  var _useState7 = useState(\"\"),\n    _useState8 = _slicedToArray(_useState7, 2),\n    imageUri = _useState8[0],\n    setImageUri = _useState8[1];\n  var onSave = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      setIsLoading(true);\n      if (UserName != \"\" && Password != \"\") {\n        var user = {\n          email: UserName,\n          password: Password,\n          imageUri: ''\n        };\n        var usrC = yield UserModel.addUser(user);\n        if (imageUri != \"\") {\n          console.log(\"saving image\");\n          var url = yield UserModel.uploadImage(imageUri, usrC == null ? void 0 : usrC.access_token);\n          user.imageUri = url;\n          console.log(\"saving image : \" + url);\n        }\n        yield UserModel.updateUser(user, user.email, usrC == null ? void 0 : usrC.access_token, usrC == null ? void 0 : usrC._id);\n        setIsLoading(false);\n        if (usrC == null) {\n          alert(\"Somthing went wrong\");\n        } else {\n          LocalCache.saveUserEmail(UserName.toString());\n          navigation.navigate(\"Home\", {\n            _id: usrC._id,\n            accessToken: usrC.access_token,\n            refreshToken: usrC.refresh_token\n          });\n        }\n      }\n    });\n    return function onSave() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var onImageSelected = function onImageSelected(uri) {\n    console.log(\"onImageSelected \" + uri);\n    setImageUri(uri);\n  };\n  return _jsx(ScrollView, {\n    children: _jsxs(View, {\n      style: styles.container,\n      children: [_jsx(View, {\n        style: styles.image,\n        children: _jsx(CustomImagePicker, {\n          image: \"\",\n          onImageSelected: onImageSelected\n        })\n      }), _jsx(TextInput, {\n        style: styles.textInput,\n        onChangeText: setUserName,\n        placeholder: \"UserName\",\n        keyboardType: \"default\"\n      }), _jsx(TextInput, {\n        style: styles.textInput,\n        onChangeText: setPassword,\n        placeholder: \"Password\",\n        keyboardType: \"default\"\n      }), _jsx(TouchableHighlight, {\n        underlayColor: COLORS.clickBackground,\n        onPress: function onPress() {\n          onSave();\n        },\n        style: styles.button,\n        children: _jsx(Text, {\n          style: styles.buttonText,\n          children: \"Save\"\n        })\n      }), _jsx(View, {\n        style: styles.activity_indicator,\n        children: _jsx(ActivityIndicator, {\n          visible: isLoading\n        })\n      })]\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  image: {\n    width: \"100%\",\n    height: 250,\n    resizeMode: \"contain\"\n  },\n  textInput: {\n    height: 40,\n    margin: 12,\n    borderWidth: 1,\n    padding: 10,\n    borderColor: \"grey\"\n  },\n  button: {\n    margin: 12,\n    backgroundColor: \"grey\",\n    borderRadius: 50\n  },\n  buttonText: {\n    fontSize: 40,\n    color: \"white\",\n    textAlign: \"center\",\n    marginTop: 3,\n    marginBottom: 3\n  },\n  activity_indicator: {\n    position: \"absolute\",\n    justifyContent: \"center\",\n    width: \"100%\",\n    height: \"100%\",\n    alignItems: \"center\"\n  }\n});\nexport default Add_User;","map":{"version":3,"names":["React","useState","View","Text","StyleSheet","TextInput","TouchableHighlight","ScrollView","UserModel","COLORS","ActivityIndicator","CustomImagePicker","LocalCache","jsx","_jsx","jsxs","_jsxs","Add_User","_ref","navigation","route","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","UserName","setUserName","_useState5","_useState6","Password","setPassword","_useState7","_useState8","imageUri","setImageUri","onSave","_ref2","_asyncToGenerator","user","email","password","usrC","addUser","console","log","url","uploadImage","access_token","updateUser","_id","alert","saveUserEmail","toString","navigate","accessToken","refreshToken","refresh_token","apply","arguments","onImageSelected","uri","children","style","styles","container","image","textInput","onChangeText","placeholder","keyboardType","underlayColor","clickBackground","onPress","button","buttonText","activity_indicator","visible","create","flex","width","height","resizeMode","margin","borderWidth","padding","borderColor","backgroundColor","borderRadius","fontSize","color","textAlign","marginTop","marginBottom","position","justifyContent","alignItems"],"sources":["/Users/ohadshalom/Desktop/devops_projects/cicd_project/frontend/screens/registration_screen.tsx"],"sourcesContent":["import React, { FC, useState } from \"react\";\nimport { View, Text ,StyleSheet ,Image, TextInput, TouchableHighlight, ScrollView} from \"react-native\";\nimport UserModel,{User, UserCredentials} from \"../model/user_model\"\nimport COLORS from \"../constants/colors\";\nimport ActivityIndicator from \"./component/custom_activity_indicator\";\nimport CustomImagePicker from \"./component/custom_image_picker\";\nimport LocalCache from \"../model/local_cache\"\n\nconst Add_User: FC<{ navigation: any; route: any }> = ({\n    navigation,\n    route,\n  }) => {\n    const [isLoading,setIsLoading] =useState<boolean>(false)\n    const [UserName,setUserName] = useState<String>(\"\")\n    const [Password,setPassword] = useState<String>(\"\")\n    const [imageUri,setImageUri] = useState<String>(\"\")\n\n\n    const onSave = async ()=>{\n      setIsLoading(true)\n      if(UserName!=\"\" && Password !=\"\" ){\n        const user:User = {\n          email:UserName,\n          password:Password,\n          imageUri: ''\n        }\n        const usrC = await UserModel.addUser(user)\n        if(imageUri != \"\"){\n          console.log(\"saving image\")\n          const url = await UserModel.uploadImage(imageUri,usrC?.access_token)\n          user.imageUri = url\n          console.log(\"saving image : \" + url) \n      }\n        await UserModel.updateUser(user,user.email,usrC?.access_token,usrC?._id)\n        setIsLoading(false)\n        if(usrC==null){\n          alert(\"Somthing went wrong\")\n        }else{\n          LocalCache.saveUserEmail(UserName.toString())\n          navigation.navigate(\"Home\",{_id:usrC._id,accessToken:usrC.access_token,refreshToken:usrC.refresh_token})\n        }\n      }\n    }\n\n    const onImageSelected = (uri:String)=>{\n      console.log(\"onImageSelected \" + uri)\n      setImageUri(uri)\n  }\n    return (\n      <ScrollView>\n      <View style={styles.container}>\n      <View style={styles.image} >\n         <CustomImagePicker image={\"\"} onImageSelected={onImageSelected}></CustomImagePicker>\n      </View>\n      <TextInput style={styles.textInput} onChangeText={setUserName} placeholder=\"UserName\" keyboardType=\"default\"></TextInput>\n      <TextInput style={styles.textInput} onChangeText={setPassword} placeholder=\"Password\" keyboardType=\"default\"></TextInput>\n\n      <TouchableHighlight\n        underlayColor={COLORS.clickBackground} \n        onPress={()=>{ \n          onSave()\n        }} \n        style={styles.button}>\n         <Text style={styles.buttonText}>Save</Text>\n       </TouchableHighlight>\n       <View style={styles.activity_indicator}>\n        <ActivityIndicator visible ={isLoading}></ActivityIndicator> \n       </View>\n      </View>\n      </ScrollView>\n    );\n  };\n\n  const styles = StyleSheet.create({\n      container:{\n        flex:1\n      },\n      image:{\n        width:\"100%\",\n        height:250,\n        resizeMode:\"contain\",\n      },\n      textInput:{\n        height:40,\n        margin:12,\n        borderWidth:1,\n        padding:10,\n        borderColor:\"grey\",\n      },\n      button:{\n        margin:12,\n        backgroundColor:\"grey\",\n        borderRadius:50\n      },\n      buttonText:{\n        fontSize:40,\n        color:\"white\",\n        textAlign: \"center\",\n        marginTop:3,\n        marginBottom:3\n      },\n      activity_indicator:{\n        position:\"absolute\",\n    justifyContent:\"center\",\n    width:\"100%\",\n    height:\"100%\",\n    alignItems:\"center\"\n      }\n  })\n\n  export default Add_User"],"mappings":"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"},"metadata":{},"sourceType":"module"}